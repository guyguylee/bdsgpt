<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>이메일 인증 완료</title>
  <style>
    :root { color-scheme: light dark; }
    body { margin:0; font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans KR", sans-serif; background:#f6f7f9; }
    .wrap { min-height:100dvh; display:grid; place-items:center; padding:24px; }
    .card { width:min(520px, 92vw); background:#fff; border-radius:16px; box-shadow:0 10px 30px rgba(0,0,0,.06); padding:28px 24px; }
    h1 { font-size:22px; margin:0 0 8px; }
    p { margin:0 0 18px; color:#666; line-height:1.6; }
    .actions { display:flex; gap:12px; justify-content:flex-end; }
    button { cursor:pointer; border:0; border-radius:10px; padding:12px 18px; font-weight:700; }
    .ok { background:#2563eb; color:#fff; }
    .ghost { background:#eef2ff; color:#334155; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>이메일 인증이 완료되었습니다.</h1>
      <p>이제 앱으로 돌아가 사용을 계속하실 수 있어요.</p>
      <div class="actions">
        <button id="ok" class="ok">확인</button>
        <button id="open" class="ghost">앱으로 이동</button>
      </div>
    </div>
  </div>

  <script>
    function getParam(k, d = null) {
      try { return new URLSearchParams(location.search).get(k) ?? d; }
      catch (_) { return d; }
    }
    const app = getParam('app', 'myapp://verified');              // 딥링크
    const fallback = getParam('fallback', 'https://bdsgpt.flutterflow.app/');

    document.getElementById('ok').addEventListener('click', () => {
      // 새 창에서 열렸으면 닫고, 아니면 폴백 이동
      if (window.opener) window.close();
      else location.href = fallback;
    });

    document.getElementById('open').addEventListener('click', () => {
      // 모바일 딥링크 시도 후 폴백
      const t = Date.now();
      location.href = app;
      setTimeout(() => {
        if (Date.now() - t < 1600) location.href = fallback;
      }, 1200);
    });
  </script>
</body>
</html>
